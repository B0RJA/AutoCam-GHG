README.txt  
===========

Script Name: AutoCam-GHG.R  
Version: 1.0  
Author: [Your name or research group]  
Date: [Date of creation or last update]

DESCRIPTION  
-----------
This R script is designed to automate the control of a greenhouse gas (GHG) measurement system using suction chambers connected to a Gasera analyzer and a set of solenoid valves managed via a multiplexer. 
The system performs scheduled measurements from multiple chambers in defined time cycles and includes rain detection to ensure measurement integrity.

MAIN FUNCTIONALITY  
-------------------
- Controls suction chambers and valves via relay commands (HTTP and external executable).
- Establishes a socket connection with a Gasera gas analyzer.
- Reads rainfall data from a CSV file generated by a pluviometer.
- Performs cyclical measurements every 30 minutes for defined chamber groups (up to 3 groups).
- Logs data in real-time with timestamps (`prueba_1.txt`).
- Automatically pauses measurement if rainfall is detected.

REQUIREMENTS  
------------
- R version 4.x with the following package:
  * httr2

- External dependencies:
  * CSV rainfall file: `C:/Campbellsci/LoggerNet/CR1000XSeries_Datos_90s.csv`
  * Relay control executable: `"RelayCmd.exe"` located at  
    `C:\Users\campoMSCG_localAdmin\Desktop\programa\ProjectExes v1.2.1\`

- Network configuration:
  * Valve multiplexer accessible via HTTP at `192.168.1.101`
  * Gasera analyzer accessible via socket at `192.168.1.110:8888`

WORKFLOW  
--------
1. The script starts by initializing the connection with the analyzer and opening all suction chambers.
2. All valves are closed, and a random valve is opened to avoid stagnation.
3. Every 30 minutes, a new cycle begins:
   - Opens a specific group of chambers (unless rain is detected).
   - Activates the corresponding valve group (1 to 3).
   - Performs 5 measurement repetitions for each of the 6 chambers in the group.
   - Each chamber is measured for `t_meas` seconds (56s).
   - Measurement data is logged with timestamp and rain status.
   - If rain is detected, the analyzer is stopped and the cycle is canceled.
4. Analyzer is stopped and the system resets for the next group.

OUTPUT  
------
- `prueba_1.txt`: log file containing measurements, timestamps, and rain condition metadata.

NOTES  
-----
- The script runs continuously until manually stopped.
- Ensure the rainfall CSV is regularly updated by the data logger.
- The script assumes all devices are correctly configured and reachable on the network.

LICENSE  
-------
[Insert license type: GPLv3, MIT, etc.]

CONTACT  
-------
[Author or technical contact name]  
[Email address]  
[Institution or laboratory]
